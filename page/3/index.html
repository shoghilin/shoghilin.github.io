<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Shoghi的隨手筆記">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Shoghi的隨手筆記">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Shoghi">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-TW'
  };
</script>

  <title>Shoghi的隨手筆記</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Shoghi的隨手筆記</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>歸檔</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/22/Regression-vs-Classification/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/22/Regression-vs-Classification/" class="post-title-link" itemprop="url">Regression vs. Classification</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-06-22 13:39:45" itemprop="dateCreated datePublished" datetime="2020-06-22T13:39:45+08:00">2020-06-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-23 21:48:26" itemprop="dateModified" datetime="2020-06-23T21:48:26+08:00">2020-06-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="機器學習的監督式學習中主要分為"><a href="#機器學習的監督式學習中主要分為" class="headerlink" title="機器學習的監督式學習中主要分為"></a>機器學習的監督式學習中主要分為</h1><ul>
<li><p>回歸問題<br>回歸代表預測的⽬標值為實數 (-∞ ⾄ ∞)</p>
</li>
<li><p>分類問題。<br>分類代表預測的⽬標值為類別 (0 或 1)</p>
</li>
</ul>
<h2 id="目的差異"><a href="#目的差異" class="headerlink" title="目的差異"></a>目的差異</h2><p><strong>Supervised classification</strong> 的目的是要找出decision boundary, 也就是新得到的一筆 <strong>資料</strong> 是在decision boundary(邊界)的哪一邊來決定賦予哪一種class label.<br>而 <strong>Regression</strong> 的目的, 則是找出那條最能夠區分所有資料的那條 <strong>“線”</strong> ，再找所求的點對應的線上位置<br>(一個找點的分類，一個找分類線本身)</p>
<p><a target="_blank" rel="noopener" href="http://zylix666.blogspot.com/2016/06/supervised-classificationregression.html">更多</a></p>
<h1 id="⼆元分類-binary-class-vs-多元分類-Multi-class"><a href="#⼆元分類-binary-class-vs-多元分類-Multi-class" class="headerlink" title="⼆元分類 (binary-class) vs. 多元分類 (Multi-class)"></a>⼆元分類 (binary-class) vs. 多元分類 (Multi-class)</h1><ul>
<li><p><strong>二元分類</strong> ，顧名思義就是目標的類別僅有兩個(0 或 1)。<br>如垃圾郵件(垃圾郵件 vs. 非垃圾郵件)、瑕疵偵測 (瑕疵 vs. 正常)</p>
</li>
<li><p><strong>多元分類</strong> ，則是目標類別有兩種以上。<br>如手寫數字辨識有 10 個類別(0 ~ 9)</p>
</li>
</ul>
<h1 id="Multi-class-vs-Multi-label"><a href="#Multi-class-vs-Multi-label" class="headerlink" title="Multi-class vs. Multi-label"></a>Multi-class vs. Multi-label</h1><p>當每個樣本都只能歸在⼀個類別，我們稱之為 <strong>多分類 (Multi-class)</strong> 問題</p>
<p>而一個樣本如果可以同時有多個類別，則稱為 <strong>多標籤 (Multi-label)</strong> 問題</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/20/%E8%A8%93%E7%B7%B4-%E6%B8%AC%E8%A9%A6%E9%9B%86%E5%88%87%E5%88%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/20/%E8%A8%93%E7%B7%B4-%E6%B8%AC%E8%A9%A6%E9%9B%86%E5%88%87%E5%88%86/" class="post-title-link" itemprop="url">訓練/測試集切分</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              

              <time title="創建時間：2020-06-20 18:39:26 / 修改時間：18:52:49" itemprop="dateCreated datePublished" datetime="2020-06-20T18:39:26+08:00">2020-06-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="為何需要切分訓練集跟測試集"><a href="#為何需要切分訓練集跟測試集" class="headerlink" title="為何需要切分訓練集跟測試集"></a>為何需要切分訓練集跟測試集</h1><p>若將手上所有資料都送進模型訓練，這樣就沒有額外資料來評估模型訓練情形！<br>且為了避免過擬合，需透過驗證&#x2F;測試集進行評估</p>
<h2 id="方式"><a href="#方式" class="headerlink" title="方式"></a>方式</h2><h3 id="Scikit-learn-train-test-split-函數-document"><a href="#Scikit-learn-train-test-split-函數-document" class="headerlink" title="Scikit-learn train-test split 函數(document)"></a>Scikit-learn train-test split 函數(<a target="_blank" rel="noopener" href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html">document</a>)</h3><p>Python 中的機器學習套件 Scikit-learn 提供了了一個 train-test split 函數，可以幫助快速對資料進行切分</p>
<h3 id="K-fold-Cross-validation-document"><a href="#K-fold-Cross-validation-document" class="headerlink" title="K-fold Cross-validation(document)"></a>K-fold Cross-validation(<a target="_blank" rel="noopener" href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.KFold.html">document</a>)</h3><p>若僅做一次訓練&#x2F;測試集切分，有些資料會沒有被拿來訓練過，因此後續就有 cross-validation 的方法，可以讓結果更為穩定(Ｋ為 fold 數量)。在k-fold中，每筆資料都曾經當過一次驗證集，再取平均得到最終結果。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/19/%E6%A9%9F%E5%99%A8%E5%A6%82%E4%BD%95%E5%AD%B8%E7%BF%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/19/%E6%A9%9F%E5%99%A8%E5%A6%82%E4%BD%95%E5%AD%B8%E7%BF%92/" class="post-title-link" itemprop="url">機器如何學習?</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              

              <time title="創建時間：2020-06-19 09:44:52 / 修改時間：10:11:19" itemprop="dateCreated datePublished" datetime="2020-06-19T09:44:52+08:00">2020-06-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="機器的學習可分為3個步驟"><a href="#機器的學習可分為3個步驟" class="headerlink" title="機器的學習可分為3個步驟"></a>機器的學習可分為3個步驟</h1><ol>
<li>定義好模型 (可以是線性回歸、決策樹、神經網路路等等)</li>
<li>評估模型的好壞</li>
<li>找出讓訓練目標最佳的模型參數</li>
</ol>
<h2 id="定義模型"><a href="#定義模型" class="headerlink" title="定義模型"></a>定義模型</h2><p>選擇一個適合我們數據組的模型。當我們輸入⼀個 x 進到模型中，不同參數的模型就會產生不同的 ŷ</p>
<h2 id="評估模型的好壞"><a href="#評估模型的好壞" class="headerlink" title="評估模型的好壞"></a>評估模型的好壞</h2><p>定義⼀個目標函數 (Objective function) 也可稱作損失函數 (Loss function)，來衡量模型的好壞</p>
<p>如線性回歸模型我們可以使用均方差 (mean square error) 來衡量<br>$$MSE &#x3D; \frac{1}{n} \sum_{i&#x3D;1}^n (y_i - ŷ_i)^2$$</p>
<p>Loss 越大，代表這組參數的模型預測出的 ŷ 越不準，也代表不應該選這組參數的模型</p>
<h2 id="找出讓訓練目標最佳的模型參數"><a href="#找出讓訓練目標最佳的模型參數" class="headerlink" title="找出讓訓練目標最佳的模型參數"></a>找出讓訓練目標最佳的模型參數</h2><p>使用像是梯度下降 (Gradient Descent)、增量訓練 (Additive Training) 等方式找出一組參數，讓模型產生的 ŷ 與真正的 y 很接近</p>
<h1 id="過擬合-over-fitting"><a href="#過擬合-over-fitting" class="headerlink" title="過擬合 (over-fitting)"></a>過擬合 (over-fitting)</h1><p>過擬合代表模型可能學習到資料中的噪音，導致在實際應用時預測失準</p>
<p>可以通過 <strong>學習曲線 Learning curve</strong> ，來觀察是否已經過擬合了</p>
<h2 id="如何解決過擬合-x2F-欠擬合"><a href="#如何解決過擬合-x2F-欠擬合" class="headerlink" title="如何解決過擬合&#x2F;欠擬合"></a>如何解決過擬合&#x2F;欠擬合</h2><p>過擬合</p>
<ul>
<li>增加資料量</li>
<li>降低模型複雜度</li>
<li>使用正規化 (Regularization)</li>
</ul>
<p>欠擬合</p>
<ul>
<li>增加模型複雜度</li>
<li>減輕或不使用正規化</li>
</ul>
<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><p>理解機器學習中很重要的 Bias&#x2F;Variance tradeoff的意義為何<br><a target="_blank" rel="noopener" href="http://bangqu.com/yjB839.html">http://bangqu.com/yjB839.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/18/%E5%88%86%E9%A1%9E%E5%9E%8B%E7%89%B9%E5%BE%B5%E5%84%AA%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/18/%E5%88%86%E9%A1%9E%E5%9E%8B%E7%89%B9%E5%BE%B5%E5%84%AA%E5%8C%96/" class="post-title-link" itemprop="url">分類型特徵優化-葉編碼</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              

              <time title="創建時間：2020-06-18 17:18:07 / 修改時間：17:50:42" itemprop="dateCreated datePublished" datetime="2020-06-18T17:18:07+08:00">2020-06-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="葉編碼-leaf-encoding"><a href="#葉編碼-leaf-encoding" class="headerlink" title="葉編碼 (leaf encoding)"></a>葉編碼 (leaf encoding)</h1><p>葉編碼 (leaf encoding) 顧名思義，是採用決策樹的葉點作為編碼依據重新編碼<br>每棵樹視為一個新特徵，每個新特徵均為分類型特徵，決策樹的葉點與該特徵標籤一一對應，最後再以邏輯斯迴歸合併預測</p>
<h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>葉編碼的目的是重新 __標記資料__，以擬合後的樹狀模型分歧條件，將資料離散化，這樣比人為寫作的判斷條件更精準，更符合資料的分佈情形</p>
<p>而葉編碼編完後，因為特徵數量較多，通常搭配 <strong>邏輯斯回歸(logistic regression)</strong> 或者 <strong>分解機(Factorization Machine)</strong> 做預測(也就是做分類預測的集成)，其他模型較不適合</p>
<h3 id="分類預測的集成"><a href="#分類預測的集成" class="headerlink" title="分類預測的集成"></a>分類預測的集成</h3><p>多個分類預測結果(意義上是對機率的預估，而不同特徵表示不同的判斷條件)，需要先將機率倒推回對應數值相加後再由sigmoid 函數算回機率，類似邏輯斯回歸(logistic regression)的算法</p>
<p>我們可以將sigmoid 函數理解成 「成功可能性與機率的互換」。這裡的成功可能性 正 表示較有可能，負 表示較不可能。<br>所以當我們使用 sigmoid 的反函數，就可以將機率重新轉為成功可能性，加完後再用 sigmoid 轉回機率</p>
<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><p>Feature transformations with ensembles of trees<br><a target="_blank" rel="noopener" href="https://scikit-learn.org/stable/auto_examples/ensemble/plot_feature_transformation.html#example-ensemble-plot-feature-transformation-py">https://scikit-learn.org/stable/auto_examples/ensemble/plot_feature_transformation.html#example-ensemble-plot-feature-transformation-py</a><br>CTR预估[十一]: Algorithm-GBDT Encoder<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/31734283">https://zhuanlan.zhihu.com/p/31734283</a><br>三分鐘了解推薦系統中的分解機方法（Factorization Machine,FM）<br><a target="_blank" rel="noopener" href="https://kknews.cc/code/62k4rml.html">https://kknews.cc/code/62k4rml.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/16/%E7%89%B9%E5%BE%B5%E9%87%8D%E8%A6%81%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/16/%E7%89%B9%E5%BE%B5%E9%87%8D%E8%A6%81%E6%80%A7/" class="post-title-link" itemprop="url">特徵重要性</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              

              <time title="創建時間：2020-06-16 16:50:35 / 修改時間：19:28:47" itemprop="dateCreated datePublished" datetime="2020-06-16T16:50:35+08:00">2020-06-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="特徵重要性"><a href="#特徵重要性" class="headerlink" title="特徵重要性"></a>特徵重要性</h1><p>特徵重要性是增刪特徵的重要判定準則，在領域知識不足時，便是改善模型的最大幫手</p>
<h2 id="樹狀模型的特徵重要性"><a href="#樹狀模型的特徵重要性" class="headerlink" title="樹狀模型的特徵重要性"></a>樹狀模型的特徵重要性</h2><p>樹狀模型的特徵重要性，預設方式是取 <strong>特徵決定分支的次數</strong><br>除此之外，還有兩種更直覺的特徵重要性 : 特徵覆蓋度、損失函數降低量</p>
<h2 id="實作方面"><a href="#實作方面" class="headerlink" title="實作方面"></a>實作方面</h2><p>在實作方面，<strong>sklearn</strong> 當中的樹狀模型，都有特徵重要性這項方法(.feature_importances_)，並都採用分支次數<br>而 <strong>進階版的GDBT模型</strong> (xgboost, lightgbm, catboost) 中，才有上述三種不同的重要性</p>
<h1 id="排列重要性-permutation-Importance"><a href="#排列重要性-permutation-Importance" class="headerlink" title="排列重要性 (permutation Importance)"></a>排列重要性 (permutation Importance)</h1><p>雖然特徵重要性相當實用，然而計算原理必須基於樹狀模型，於是有了可延伸至非樹狀狀模型的 <strong>排序重要性</strong> </p>
<h2 id="何謂排序重要性"><a href="#何謂排序重要性" class="headerlink" title="何謂排序重要性"></a>何謂排序重要性</h2><p>排序重要性計算，是打散單一特徵的資料排序順序，再用原本模型重新預測，觀察打散前後誤差會變化多少。<br>相較起特徵重要性，雖計算時間較長，但可以應用在各種機器學習模型中。</p>
<h1 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h1><p>机器学习 - 特征选择算法流程、分类、优化与发展综述<br><a target="_blank" rel="noopener" href="https://juejin.im/post/5a1f7903f265da431c70144c">https://juejin.im/post/5a1f7903f265da431c70144c</a><br>Machine Learning Explainability Home Page<br><a target="_blank" rel="noopener" href="https://www.kaggle.com/dansbecker/permutation-importance?utm_medium=email&amp;utm_source=mailchimp&amp;utm_campaign=ml4insights">https://www.kaggle.com/dansbecker/permutation-importance?utm_medium=email&amp;utm_source=mailchimp&amp;utm_campaign=ml4insights</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/15/%E7%89%B9%E5%BE%B5%E9%81%B8%E6%93%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/15/%E7%89%B9%E5%BE%B5%E9%81%B8%E6%93%87/" class="post-title-link" itemprop="url">特徵選擇</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              

              <time title="創建時間：2020-06-15 11:37:57 / 修改時間：14:55:49" itemprop="dateCreated datePublished" datetime="2020-06-15T11:37:57+08:00">2020-06-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="特徵選擇概念"><a href="#特徵選擇概念" class="headerlink" title="特徵選擇概念"></a>特徵選擇概念</h1><h2 id="特徵需要適當的增加與減少，以提升精確度並減少計算時間"><a href="#特徵需要適當的增加與減少，以提升精確度並減少計算時間" class="headerlink" title="特徵需要適當的增加與減少，以提升精確度並減少計算時間"></a>特徵需要適當的增加與減少，以提升精確度並減少計算時間</h2><ul>
<li>增加特徵 : 特徵組合 ，<a href="/2020/06/12/%E7%89%B9%E5%BE%B5%E7%B5%84%E5%90%88-%E9%A1%9E%E5%88%A5%E8%88%87%E6%95%B8%E5%80%BC%E7%B5%84%E5%90%88">群聚編碼</a></li>
<li>減少特徵 : 特徵選擇</li>
</ul>
<h2 id="特徵選擇有三大類⽅方法"><a href="#特徵選擇有三大類⽅方法" class="headerlink" title="特徵選擇有三大類⽅方法"></a>特徵選擇有三大類⽅方法</h2><ul>
<li>過濾法 (Filter) : 按照相關性或發散性選定統計數值與設定門檻，並刪除低於門檻的特徵</li>
<li>包裝法 (Wrapper) : 根據目標函數，逐步加入特徵或刪除特徵</li>
<li>嵌入法 (Embedded) : 使用機器學習模型，根據擬合後的係數，刪除係數低於⾨門檻的特徵</li>
</ul>
<h3 id="常用特徵選擇法"><a href="#常用特徵選擇法" class="headerlink" title="常用特徵選擇法"></a>常用特徵選擇法</h3><h4 id="過濾法"><a href="#過濾法" class="headerlink" title="過濾法 :"></a>過濾法 :</h4><ul>
<li><strong>相關係數過濾法</strong><br>使用相關性熱圖，找到⽬標值之後，觀察其他特徵與目標值相關係數，接著訂出相關係數門檻值，<br>特徵相關係數絕對值低於門檻者刪除即可</li>
</ul>
<p>-&gt; 相關性熱圖實作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import seaborn as sns</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">corr = df.corr()</span><br><span class="line">sns.heatmap(corr)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h4 id="嵌入法"><a href="#嵌入法" class="headerlink" title="嵌入法 :"></a>嵌入法 :</h4><ul>
<li><p><strong>L1(Lasso)嵌入法</strong><br>因為使用 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Lasso%E7%AE%97%E6%B3%95">Lasso Regression</a>時，調整不同的正規化程度，就會自然使得一部分的特徵係數為０，因此刪除的是係數為０的特徵，不須額外指定門檻，但需調整正規化程度<br>p.s. 正規化是指「Regularization」，作用是避免模型太複雜而產生 Overfitting 的狀況</p>
</li>
<li><p><strong>GDBT(梯度提升樹)嵌入法</strong><br>使用梯度提升樹擬合後，以特徵在節點出現的 <strong>頻率</strong> 當作 <strong>特徵重要性</strong> ，以此刪除重要性低於門檻的特徵，這種作法也稱為 GDBT 嵌入法</p>
</li>
</ul>
<h4 id="效能對比"><a href="#效能對比" class="headerlink" title="效能對比"></a>效能對比</h4><table>
<thead>
<tr>
<th></th>
<th>計算時間</th>
<th>共線性</th>
<th>特徵穩定性</th>
</tr>
</thead>
<tbody><tr>
<td>相關係數過濾法</td>
<td>快速</td>
<td>無法排除</td>
<td>穩定</td>
</tr>
<tr>
<td>Lasso 嵌入法</td>
<td>快速</td>
<td>能排除</td>
<td>不穩定</td>
</tr>
<tr>
<td>GDBT 嵌入法</td>
<td>較慢</td>
<td>能排除</td>
<td>穩定</td>
</tr>
</tbody></table>
<p>ps.因近期出現大量GDBT改良版，大大改善了計算時間，因此GDBT為現在的主流</p>
<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><p>特征选择<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/32749489">https://zhuanlan.zhihu.com/p/32749489</a><br>特徵選擇 Feature Selection<br><a target="_blank" rel="noopener" href="https://machine-learning-python.kspax.io/intro-1">https://machine-learning-python.kspax.io/intro-1</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/12/%E7%89%B9%E5%BE%B5%E7%B5%84%E5%90%88-%E9%A1%9E%E5%88%A5%E8%88%87%E6%95%B8%E5%80%BC%E7%B5%84%E5%90%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/12/%E7%89%B9%E5%BE%B5%E7%B5%84%E5%90%88-%E9%A1%9E%E5%88%A5%E8%88%87%E6%95%B8%E5%80%BC%E7%B5%84%E5%90%88/" class="post-title-link" itemprop="url">特徵組合-類別與數值組合</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              

              <time title="創建時間：2020-06-12 10:57:23 / 修改時間：11:30:00" itemprop="dateCreated datePublished" datetime="2020-06-12T10:57:23+08:00">2020-06-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="群聚編碼-Group-by-Encoding"><a href="#群聚編碼-Group-by-Encoding" class="headerlink" title="群聚編碼 (Group by Encoding)"></a>群聚編碼 (Group by Encoding)</h1><p>群聚編碼是數值型特徵對文字型特徵最重要的特徵組合方式<br>常見的有 mean, median, mode, max, min, count 等</p>
<h2 id="何時使用"><a href="#何時使用" class="headerlink" title="何時使用"></a>何時使用</h2><p>與數值特徵組合相同，先以 <strong>領域知識</strong> 或 <strong>特徵重要性</strong> 挑選強力特徵後，再將特徵組成更強的特徵<br>若兩者皆為數值則使用特徵組合，其一為類別則用群聚編碼</p>
<h2 id="如何挑選適當的統計值-如mean-median-mode-max-min-count等-："><a href="#如何挑選適當的統計值-如mean-median-mode-max-min-count等-：" class="headerlink" title="如何挑選適當的統計值(如mean, median, mode, max, min, count等)："></a>如何挑選適當的統計值(如mean, median, mode, max, min, count等)：</h2><p>依照 <strong>領域知識</strong> 挑選，或亂槍打鳥後再以 <strong>特徵重要性</strong> 挑選，寧濫勿缺</p>
<h2 id="相較起均值編碼-Mean-Encoding-："><a href="#相較起均值編碼-Mean-Encoding-：" class="headerlink" title="相較起均值編碼(Mean Encoding)："></a>相較起均值編碼(Mean Encoding)：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">		|	均值編碼			群聚編碼</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">平均對象		|	目標值			其他數值型特徵</span><br><span class="line">overfitting	|	容易			不易</span><br><span class="line">smoothing	|	需要			不需要</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/10/%E6%99%82%E9%96%93%E5%9E%8B%E7%89%B9%E5%BE%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/10/%E6%99%82%E9%96%93%E5%9E%8B%E7%89%B9%E5%BE%B5/" class="post-title-link" itemprop="url">時間型特徵</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-06-10 12:31:09" itemprop="dateCreated datePublished" datetime="2020-06-10T12:31:09+08:00">2020-06-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-11 11:01:23" itemprop="dateModified" datetime="2020-06-11T11:01:23+08:00">2020-06-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="時間特徵分解"><a href="#時間特徵分解" class="headerlink" title="時間特徵分解"></a>時間特徵分解</h1><p>時間型特徵最常用的是特徵分解 - 拆解成年&#x2F;月&#x2F;日&#x2F;時&#x2F;分&#x2F;秒的分類值</p>
<h2 id="缺點"><a href="#缺點" class="headerlink" title="缺點"></a>缺點</h2><p>某些欄(例 : 分、秒)與目標值的關係很低</p>
<h2 id="週期循環特徵"><a href="#週期循環特徵" class="headerlink" title="週期循環特徵"></a>週期循環特徵</h2><p>若要改善上述缺點可以利用時間的週期性來合成特徵，也就是 <strong>週期循環特徵</strong></p>
<h3 id="什麼是週期循環特徵"><a href="#什麼是週期循環特徵" class="headerlink" title="什麼是週期循環特徵"></a>什麼是週期循環特徵</h3><p>週期循環特徵是將時間 <strong>循環</strong> 特性改成特徵方式<br>設計關鍵在於首尾相接, 因此我們需要使⽤用 sin &#x2F;cos 等週期函數轉換</p>
<p>例如 :<br>年週期 (正 : 冷 &#x2F; 負 : 熱) &#x3D; cos((月&#x2F;6 + 日&#x2F;180 )π)<br>周週期 (正 : 精神飽滿 &#x2F; 負 : 疲倦) &#x3D;  sin((星期幾&#x2F;3.5 + ⼩時&#x2F;84 )π)<br>⽇週期 (正 : 精神飽滿 &#x2F; 負 : 疲倦) &#x3D; sin((⼩時&#x2F;12 + 分&#x2F;720 + 秒&#x2F;43200 )π)</p>
<h3 id="常見的週期循環特徵"><a href="#常見的週期循環特徵" class="headerlink" title="常見的週期循環特徵"></a>常見的週期循環特徵</h3><p>常見的週期循環特徵有 - 年週期(季節) &#x2F; 周期(例假日) &#x2F;日週期(日夜與生活作息),<br>要注意的是最高與最低點的設置</p>
<h2 id="延伸："><a href="#延伸：" class="headerlink" title="延伸："></a>延伸：</h2><p>Python-基础-时间日期处理小结<br><a target="_blank" rel="noopener" href="http://www.wklken.me/posts/2015/03/03/python-base-datetime.html">http://www.wklken.me/posts/2015/03/03/python-base-datetime.html</a><br>python document<br><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/datetime.html">https://docs.python.org/3/library/datetime.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/09/%E5%9D%87%E5%80%BC%E7%B7%A8%E7%A2%BC%E5%92%8C%E5%B9%B3%E6%BB%91%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/09/%E5%9D%87%E5%80%BC%E7%B7%A8%E7%A2%BC%E5%92%8C%E5%B9%B3%E6%BB%91%E5%8C%96/" class="post-title-link" itemprop="url">均值編碼和平滑化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-06-09 12:05:10" itemprop="dateCreated datePublished" datetime="2020-06-09T12:05:10+08:00">2020-06-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-11 11:01:56" itemprop="dateModified" datetime="2020-06-11T11:01:56+08:00">2020-06-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="均值編碼和平滑化"><a href="#均值編碼和平滑化" class="headerlink" title="均值編碼和平滑化"></a>均值編碼和平滑化</h1><h2 id="均值編碼-Mean-Encoding"><a href="#均值編碼-Mean-Encoding" class="headerlink" title="均值編碼 (Mean Encoding)"></a>均值編碼 (Mean Encoding)</h2><h3 id="什麼是均值編碼？"><a href="#什麼是均值編碼？" class="headerlink" title="什麼是均值編碼？"></a>什麼是均值編碼？</h3><p>使用目標值的平均值，取代原本的類別型特徵</p>
<h3 id="甚麼時候使用"><a href="#甚麼時候使用" class="headerlink" title="甚麼時候使用"></a>甚麼時候使用</h3><p>如果類別特徵看起來與目標值有顯著相關，那麼均值編碼便是一個不錯的選擇</p>
<h3 id="缺點"><a href="#缺點" class="headerlink" title="缺點"></a>缺點</h3><p>然而均值編碼的缺點是如果交易樣本非常少, 且剛好抽到極端值, 平均結果可能會有誤差很大。<br>如：<br>各籃球隊中鋒身高有{180,175,220,200,210}，然而若是抽到175，並以此作均值編碼，便會產生極大誤差</p>
<h4 id="怎麼解決呢"><a href="#怎麼解決呢" class="headerlink" title="怎麼解決呢"></a>怎麼解決呢</h4><p>若要解決這個缺點均值編碼還需要考慮紀錄筆數, 以當作可靠度的參考，也就是__平滑化 (Smoothing)__</p>
<p>其中一種方式如下：<br>$$新類別均值 &#x3D; \frac{原類別平均 * 類別樣本數 + 全部的總平均 * 調整因子}{類別樣本數 + 調整因⼦子}$$<br>調整因子用來調整平滑化的程度，依總樣本數調整</p>
<p>當平均值的可靠度低時, 我們會傾向相信全部的總平均<br>當平均值的可靠度⾼時, 我們會傾向相信類別的平均<br>依照紀錄筆數, 在這兩者間取折衷</p>
<h3 id="需要注意"><a href="#需要注意" class="headerlink" title="需要注意"></a>需要注意</h3><p>當使用均值編碼時，非常容易造成overfitting，即便使用平滑化能夠修正，但實際效果有限。<br>因此仍須 <strong>經過檢驗</strong> 後再決定是否該使用均值編碼</p>
<p>延伸：<br>平均数编码：针对高基数定性特征（类别特征）的数据预处理&#x2F;特征工程<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26308272">https://zhuanlan.zhihu.com/p/26308272</a></p>
<h1 id="計數編碼-x2F-雜湊編碼"><a href="#計數編碼-x2F-雜湊編碼" class="headerlink" title="計數編碼&#x2F;雜湊編碼"></a>計數編碼&#x2F;雜湊編碼</h1><h2 id="計數編碼-Counting"><a href="#計數編碼-Counting" class="headerlink" title="計數編碼 (Counting)"></a>計數編碼 (Counting)</h2><h3 id="什麼是記數編碼"><a href="#什麼是記數編碼" class="headerlink" title="什麼是記數編碼"></a>什麼是記數編碼</h3><p>如果類別的 <strong>目標平均值</strong> 與 <strong>類別筆數</strong> 呈正相關(或負相關)，也可以將筆數本⾝身當成特徵<br>例如 : 購物網站的消費金額預測</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   		平均 		記錄筆數				記數編碼 </span><br><span class="line">美金		300		x3000				3000</span><br><span class="line">台幣		100		x500		=&gt;		500</span><br><span class="line">日圓		50		x10				10</span><br></pre></td></tr></table></figure>
<p>p.s. 自然語言處理時，字詞的計數編碼又稱詞頻，本身就是一個很重要的特徵</p>
<h3 id="實作方式"><a href="#實作方式" class="headerlink" title="實作方式"></a>實作方式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">count_df = df.groupby([&#x27;Cabin&#x27;])[&#x27;Name&#x27;].agg(&#123;&#x27;Cabin_Count&#x27;:&#x27;size&#x27;&#125;).reset_index()</span><br><span class="line">df = pd.merge(df, count_df, on=[&#x27;Cabin&#x27;], how=&#x27;left&#x27;)</span><br><span class="line">--------------------------</span><br><span class="line">df_temp[&#x27;Cabin_Count&#x27;] = df[&#x27;Cabin_Count&#x27;]</span><br></pre></td></tr></table></figure>

<h2 id="特徵雜湊-Feature-Hash-wiki"><a href="#特徵雜湊-Feature-Hash-wiki" class="headerlink" title="特徵雜湊 ( Feature Hash ) wiki"></a>特徵雜湊 ( Feature Hash ) <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Feature_hashing">wiki</a></h2><p>當類別型特徵最麻煩的問題 : 相異異類別的數量非常龐大, 該如何編碼?<br>然而這個問題並沒有通用的解決方法，只能通過折衷的方式達成<br>也就是 <strong>特徵雜湊</strong></p>
<h3 id="什麼是特徵雜湊"><a href="#什麼是特徵雜湊" class="headerlink" title="什麼是特徵雜湊"></a>什麼是特徵雜湊</h3><p>特徵雜湊是一種折衷方案，將類別由雜湊函數定應到一組數字，調整雜湊函數對應值的數量，<br>在計算空間&#x2F;時間與鑑別度間取折衷，也提高了訊息密度, 減少無用的標籤</p>
<h3 id="什麼時候使用"><a href="#什麼時候使用" class="headerlink" title="什麼時候使用"></a>什麼時候使用</h3><p>當相異類別數量相當大且其他編碼方式效果更差時，可以考慮雜湊編碼以節省時間</p>
<h3 id="實作方式-1"><a href="#實作方式-1" class="headerlink" title="實作方式"></a>實作方式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_temp[&#x27;Cabin_Hash&#x27;] = df[&#x27;Cabin&#x27;].map(lambda x: hash(x) % 10)</span><br></pre></td></tr></table></figure>

<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><p>Feature hashing(特征哈希)<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/laolu1573/article/details/79410187">https://blog.csdn.net/laolu1573/article/details/79410187</a><br>基于sklearn的文本特征抽取<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/063840752151">https://www.jianshu.com/p/063840752151</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/07/%E5%8E%BB%E9%99%A4%E5%81%8F%E6%85%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Shoghi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shoghi的隨手筆記">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/07/%E5%8E%BB%E9%99%A4%E5%81%8F%E6%85%8B/" class="post-title-link" itemprop="url">去除偏態</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-06-07 10:09:14" itemprop="dateCreated datePublished" datetime="2020-06-07T10:09:14+08:00">2020-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-06-10 10:58:48" itemprop="dateModified" datetime="2020-06-10T10:58:48+08:00">2020-06-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">程式筆記</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="特徵工程-數值型特徵-去除偏態"><a href="#特徵工程-數值型特徵-去除偏態" class="headerlink" title="特徵工程 數值型特徵 - 去除偏態"></a>特徵工程 數值型特徵 - 去除偏態</h1><p>去除偏態的目標在於讓數值更接近常態分布(左右對稱，集中點在中央)，讓平均值更具有代表性。<br>當離群資料比例太高，或者平均值沒有代表性時，皆可以考慮去除偏態。</p>
<h2 id="去偏方式"><a href="#去偏方式" class="headerlink" title="去偏方式"></a>去偏方式</h2><ul>
<li><p><strong>對數去偏 log1p</strong><br>對數去偏就是使用自然對數(log)去除偏態，常見用於非負值且可能為0的值<br>為了使對數0為0，需要在後面加上1(plus 1 -&gt; 1p)後，再取對數<br>還原時用expm1(exp + minus 1)</p>
</li>
<li><p><strong>方根去偏(sqrt)</strong><br>方根去偏就是將數值減去最⼩值後開根號，最大值有限的時候適用 (例 : 成績轉換)</p>
</li>
<li><p><strong>分布去偏(boxcox)</strong><br>分布去偏是採用boxcox轉換函數(詳情如下表)，函數的 lambda(λ) 參參數為 0 時<br>等於 log 函數，lambda(λ) 為 0.5 時等於開根號 (即sqrt)，因此可藉由參數的調整更靈<br>活地轉換數值，但要特別注意Y的輸入數值必須要為正 (不可為0)<br><img src="https://i1.kknews.cc/SIG=2pc2rsg/5nn00039sp58s81ss8o.jpg" alt="boxcox"></p>
</li>
</ul>
<p>相關延伸：<br>偏度与峰度及其python实现<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013555719/article/details/78530879">https://blog.csdn.net/u013555719/article/details/78530879</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一頁"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一頁"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Shoghi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/shoghilin" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shoghilin" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:shoghiLin22@gmail.com" title="E-Mail → mailto:shoghiLin22@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/%E6%9F%8F%E5%AE%87-%E6%9E%97-03995a1a0" title="Linkedin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;柏宇-林-03995a1a0" rel="noopener" target="_blank"><i class="linkedin-square fa-fw"></i>Linkedin</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shoghi</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
